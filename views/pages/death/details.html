{% extends "details-template.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "hmpo-submit/macro.njk" import hmpoSubmit %}
{% from "components/lev-flag.njk" import levFlag %}

{% set hmpoPageKey = "death.detailsPage" %}
{% set govukServiceNameKey = translate("pages.death.serviceName") %}
{% set govukServiceTitleKey = translate("pages.death.detailPage.pageTitle") %}
{% set govukServiceUrl = "/death" %}
{% set rowsArray = [] %}

{% set hmpoTitle -%} {{ title }} {%- endset %}

{% block mainContent %}
    {{ super() }}

    {% if record.flags.refer %}
        {{ levFlag(ctx, {key: "refer", type: "alert"}) }}
    {% endif %}
    {% if record.flags.corrected %}
        {{ levFlag(ctx, {key: "corrected", type: "warning"}) }}
    {% endif %}

    {% include "../links.html" %}

    {{ govukTable({
        classes: "details",
        firstCellIsHeader: true,
        rows: record
    }) }}

    <div class="govuk-button-group">
        {{ hmpoSubmit(ctx, {id: "newSearch", key: "newSearch", href: "/death"}) }}
        {{ hmpoSubmit(ctx, {id: "editSearch", key: "editSearch", href: "/death/search", classes: "blue"}) }}
        {% if showBackToResults %}
            {{ hmpoSubmit(ctx, {
                id: "backToResults",
                key: "backToResults",
                href: "/death/results",
                classes: "grey"
            }) }}
        {% endif %}
    </div>
{% endblock %}
